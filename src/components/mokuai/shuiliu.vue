<template>
    <!-- 水流标签 -->
    <div>
        <!-- <div class='shuiliu shuiliu1 shuiliuAnimateR' where='1'></div> -->
        <div class="shuiliu shuiliu1" where="1">
            <div class="shuiliu_r" style="width: 200px;">
                <img style="height:50%;margin: 0px 43px;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
                <img style="height:50%;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
            </div>
        </div>
        <!-- <div class='shuiliu shuiliu2 shuiliuAnimateT' where='1'></div> -->
        <div class="shuiliu shuiliu2" where="1" style="position:absolute;height:60px;overflow: hidden;">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <!-- <div class='shuiliu shuiliu3 shuiliuAnimateR' where='1'></div> -->
        <div class="shuiliu shuiliu3" where="1">
            <div class="shuiliu_r" style="width: 200px;">
                <img style="height:50%;margin: 0px 43px;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
                <img style="height:50%;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
            </div>
        </div>
        <!-- <div class='shuiliu shuiliu4 shuiliuAnimateR' where='1,2'></div> -->
        <div class="shuiliu shuiliu4" where="1,2" style="">
            <div class="shuiliu_r" style="width: 200px;">
                <img style="height:50%;margin: 0px 43px;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
                <img style="height:50%;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
            </div>
        </div>
        <!-- <div class='shuiliu shuiliu5 shuiliuAnimateT' where='1,2'></div> -->
        <div class="shuiliu shuiliu5" where="1,2" style="position:absolute;height:60px;overflow: hidden;">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <!-- <div class='shuiliu shuiliu6 shuiliuAnimateL' where='1,2'></div> -->
        <div class="shuiliu shuiliu6" where="1,2" style="">
            <div class="shuiliu_l" style="width: 200px;">
                <img style="height:50%;margin: 0px 43px;" class="" src="../../assets/images/shuifeiji/shuiliu_l.png">
                <img style="height:50%;" class="" src="../../assets/images/shuifeiji/shuiliu_l.png">
            </div>
        </div>
        <div class="shuiliu shuiliu7" where="1,2">
            <div class="shuiliu_l" style="width: 200px;">
                <img style="height:50%;margin: 0px 43px;" class="" src="../../assets/images/shuifeiji/shuiliu_l.png">
            </div>
        </div>
        <div class="shuiliu shuiliu8" where="1,2,4">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu9 " where="1,2,5">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu10 " where="1,2,6">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu11 " where="1,2,7">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu12 " where="1,2,8">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu13 " where="1,2,9">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu14 " where="1,2,10">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu15 " where="1,2,11">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>

        <div class="shuiliu shuiliu16 " where="1,2" or="4,5,6,7,8,9,10,11">
            <div class="shuiliu_r" style="width: 200px;">
                <img style="height:50%;margin: 0px 43px;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
                <img style="height:50%;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
            </div>
        </div>
        <div class="shuiliu shuiliu17" where="1,2" or="4,5,6,7,8,9,10,11">
            <div class="shuiliu_r" style="width: 200px;">
                <img style="height:50%;margin: 0px 43px;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
                <img style="height:50%;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
            </div>
        </div>
        <!-- 肥水混合 -->
        <div class="hunheji" where="1,2,12" or="4,5,6,7,8,9,10,11">
            <div class="luoxuan" style="">
                <img style="display:block;height:100%" class="" src="../../assets/images/shuifeiji/luoxuan1.png">
                <img style="display:block;height:100%" class="" src="../../assets/images/shuifeiji/luoxuan1.png">
                <img style="display:block;height:100%" class="" src="../../assets/images/shuifeiji/luoxuan1.png">
                <img style="height:100%" class="" src="../../assets/images/shuifeiji/luoxuan1.png">
            </div>
        </div>
        <!-- <div class='shuiliu shuiliu18 shuiliuAnimateB' style='display:none;'  where='1,2' or='4,5,6,7,8,9,10,11'></div> -->
        <div class="shuiliu shuiliu19" where="1,3">
            <div class="shuiliu_r" style="width: 200px;">
                <img style="height:50%;margin: 0px 43px;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
                <img style="height:50%;" class="" src="../../assets/images/shuifeiji/shuiliu_r.png">
            </div>
        </div>
        <!-- <div class="shuiliu shuiliu20" where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu21" where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu22" where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu23 " where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuB" style="">
                <img style="display:block;height:50%;margin: 0 0" class="" src="../../assets/images/shuifeiji/shuiliu_b.png">
            </div>
        </div>
        <div class="shuiliu shuiliu24 " where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuB" style="">
                <img style="display:block;height:50%;margin: 0 0" class="" src="../../assets/images/shuifeiji/shuiliu_b.png">
            </div>
        </div>
        <div class="shuiliu shuiliu25 " where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuB" style="">
                <img style="display:block;height:50%;margin: 0 0" class="" src="../../assets/images/shuifeiji/shuiliu_b.png">
            </div>
        </div>
        <div class="shuiliu shuiliu26" where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu27" where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu28" where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuT" style="">
                <img style="display:block;height:50%;margin: 55px 0" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
                <img style="height:50%;display:block;" class="" src="../../assets/images/shuifeiji/shuiliu_t.png">
            </div>
        </div>
        <div class="shuiliu shuiliu29 " where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuB" style="">
                <img style="display:block;height:50%;margin: 0 0" class="" src="../../assets/images/shuifeiji/shuiliu_b.png">
            </div>
        </div>
        <div class="shuiliu shuiliu30 " where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuB" style="">
                <img style="display:block;height:50%;margin: 0 0" class="" src="../../assets/images/shuifeiji/shuiliu_b.png">
            </div>
        </div>
        <div class="shuiliu shuiliu31 " where="1,2" or="4,5,6,7,8,9,10,11" where1="1,3">
            <div class="shuiliuB" style="">
                <img style="display:block;height:50%;margin: 0 0" class="" src="../../assets/images/shuifeiji/shuiliu_b.png">
            </div>
        </div> -->
    </div>
</template>

<script>
export default {
    mounted(){
        // this.tiaozhengshuiliu()
        this.$bus.$on('getCode',(code)=>{ // 这里一定要用箭头函数
            console.log(code)
            this.tiaozhengshuiliu(code)
        })
    },
    data(){
        return{
            // 打开的按钮
            openKey:[]
        }
    },
    methods:{
        tiaozhengshuiliu(code){
            // 获取所有流水
	        var shuiliuBox = document.getElementsByClassName('shuiliu')
            shuiliuBox = Array.prototype.slice.apply(shuiliuBox);
            // 获取肥水混合剂,加到流水里一起
            var hunheji = document.getElementsByClassName('hunheji')
            hunheji = Array.prototype.slice.apply(hunheji);
            var shuiliuBox = shuiliuBox.concat(hunheji)
            // 获取目前开关的情况，有则删除，无则添加
            const index = this.openKey.indexOf(code)
            // console.log(index)
            if (index === -1) {
                this.openKey.push(code)
            } else {
                this.openKey.splice(index, 1)
            }
            // console.log(this.openKey)

            // 调整水流的逻辑
            for( var i = 0 ; i < shuiliuBox.length ; i++ ){
                var openKey = this.openKey
                var shuiliuItem = shuiliuBox[i];
                var where = shuiliuItem.getAttribute("where");
                if( !where ) continue;
                where = where.split(",");
                var or = shuiliuItem.getAttribute("or");
                if( or ) or = or.split(",");
                var bool = true;
                for( var ii in where ){
                    if( openKey.indexOf(where[ii]) === -1 ){
                        bool = false;
                        break;
                    }
                } 
                if( or && bool ){
                    bool = false;
                    for( var ii in or ){
                        if( openKey.indexOf(or[ii]) !== -1 ){
                            bool = true;
                            break;
                        }
                    }
                }
                var bool1 = true;
                var where1 = shuiliuItem.getAttribute("where1");
                if( !where1 ) {
                    bool1=false;
                }else{
                    where1 = where1.split(",");
                    var or1 = shuiliuItem.getAttribute("or1");
                    if( or1 ) or1 = or1.split(",");
                    for( var ii in where1 ){
                        if( openKey.indexOf(where1[ii]) === -1 ){
                            bool1 = false;
                            break;
                        }
                    }
                    if( or1 && bool1 ){
                        bool1 = false;
                        for( var ii in or1 ){
                            if( openKey.indexOf(or1[ii]) !== -1 ){
                                bool1 = true;
                                break;
                            }
                        }
                    }
                }
                if( bool || bool1 ){
                    shuiliuItem.style.display = 'block'
                    // shuiliuItem.show();
                }else{
                    shuiliuItem.style.display = 'none'
                    // shuiliuItem.hide();
                }
            }

            // 也会影响到喷灌阀的喷水
            this.$bus.$emit('penguanfaGetOpenKey',this.openKey)

        }
    }
}
</script>

<style scoped>
.shuiliu {
	position: absolute;
	width:50px;
	height: 13px;
	display: none;
	z-index: 2;
	overflow: hidden;
}

.shuiliu.show {
	display: block;
}

.hunheji {
	left: 875px;
	top: 436px;
	width: 36px;
	z-index: 2;
	height: 110px;
	/* background: url(images/luoxuan.png); */
    display:none;
    position:absolute;
    overflow: hidden;
}

.shuiliu1 {
    left: 90px;
    top: 782px;
	position: absolute;
	height: 14px;
	width: 60px;
	overflow: hidden;
}

.shuiliu2 {
    left: 184px;
	top: 690px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}


.shuiliu3 {
	left: 350px;
	top: 782px;
	position: absolute;
	height: 14px;
	width: 60px;
	overflow: hidden;
}

.shuiliu4 {
	left: 450px;
	top: 618px;
	height: 13px;
	/* background: url(images/shuiliu_r.png); */
	width: 47px;
}

.shuiliu5 {
	left: 800px;
	top: 540px;
	width: 13px;
	/* background: url(images/shuiliu_T.png); */
	height: 47px;
}

.shuiliu6 {
	left: 500px;
	top: 495px;
	width: 150px;
	/* background: url(images/shuiliu_l.png); */
}

.shuiliu7 {
	left: 240px;
	top: 495px;
	width: 150px;
	/* background: url(images/shuiliu_l.png); */
}

.shuiliu8 {
	left: 65.5px;
	top: 333px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu9 {
	left: 158px;
	top: 333px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu10 {
	left: 249px;
	top: 333px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}
.shuiliu11 {
	left: 339px;
	top: 333px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}
.shuiliu12 {
	left: 432px;
	top: 333px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}
.shuiliu13 {
	left: 523px;
	top: 333px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu14 {
	left: 614.5px;
	top: 333px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu15 {
	left: 704px;
	top: 333px;
	height: 47px;
	width: 13px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu16 {
	left: 240px;
	top: 213px;
	width: 47px;
	/* background: url(images/shuiliu_R.png); */
}

.shuiliu17 {
	left: 616px;
	top: 213px;
	width: 47px;
	/* background: url(images/shuiliu_R.png); */
}

/* .shuiliu18 {
	left: 817px;
	top: 203px;
	width: 13px;
	height: 47px;
	background: url(images/shuiliu_B.png);
} */

.shuiliu19 {
	left: 768px;
	top: 782px;
	width: 47px;
	/* background: url(images/shuiliu_r.png); */
}

.shuiliu20 {
	left: 72.9%;
	top: 80%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu21 {
	left: 72.9%;
	top: 50%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu22 {
	left: 72.9%;
	top: 20%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu23 {
	left: 81.5%;
	top: 80%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_b.png); */
}

.shuiliu24 {
	left: 81.5%;
	top: 45%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_b.png); */
}

.shuiliu25 {
	left: 81.5%;
	top: 20%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_b.png); */
}

.shuiliu26 {
	left: 90%;
	top: 80%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu27 {
	left: 90%;
	top: 50%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu28 {
	left: 90%;
	top: 20%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_t.png); */
}

.shuiliu29 {
	left: 98.6%;
	top: 80%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_b.png); */
}

.shuiliu30 {
	left: 98.5%;
	top: 50%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_b.png); */
}

.shuiliu31 {
	left: 98.5%;
	top: 20%;
	width: 13px;
	height: 47px;
	/* background: url(images/shuiliu_b.png); */
}

.penshui1 {
	left: calc(100% - 9px);
	top: 0;
	width: 19px;
	height: 35px;
	background: url(../../assets/images/shuifeiji/penshui.png);
	/* transform: rotateZ(90deg); */
	background-position: 0px 0px;
	background-repeat: no-repeat;
	animation: penshuiAnimate 1.5s infinite linear;
	position: absolute;
	display: none;
}
@keyframes penshuiAnimate{
	from{ background-position: -32px 0px ; }
	to{ background-position: 0px 0px; }
}

.shuiliuAnimateR {
	animation: slr 0.75s infinite;
}
@keyframes slr{
	from{ transform: translateX(0); }
	to{ transform: translateX(50%); }
}

.shuiliuAnimateT {
	animation: slt 0.75s infinite;
}
@keyframes slt{
	from{ transform: translateY(0); }
	to{ transform: translateY(-50%); }
}

.shuiliuAnimateL {
	animation: sll 0.75s infinite;
}
@keyframes sll{
	from{ transform: translateX(0); }
	to{ transform: translateX(-50%); }
}

.shuiliuAnimateB {
	animation: slb 0.75s infinite;
}
@keyframes slb {
	from{ transform: translateY(0); }
	to{ transform: translateY(50%); }
}


/* 水流动画 */
* {
    -ms-user-select: none;
}
@keyframes luoxuan {
    from {
        transform: translateY(-50%);
    }

    to {
        transform: translateY(0%);
    }
}

.luoxuan {
    animation: luoxuan 1s linear infinite;
}

@keyframes shuiliuT {
    from {
        transform: translateY(0px);
    }

    to {
        transform: translateY(-220px);
    }
}

.shuiliuT {
    animation: shuiliuT 3s linear infinite;
}

@keyframes shuiliu_r {
    from {
        transform: translateX(-100px);
    }

    to {
        transform: translateX(50px);
    }
}

.shuiliu_r {
    animation: shuiliu_r 3s linear infinite;
}

@keyframes shuiliu_l {
    from {
        transform: translateX(50px);
    }

    to {
        transform: translateX(-150px);
    }
}

.shuiliu_l {
    animation: shuiliu_l 3s linear infinite;
}

@keyframes shuiliuB {
    from {
        transform: translateY(-100px);
    }

    to {
        transform: translateY(50px);
    }
}

.shuiliuB {
    animation: shuiliuB 3s linear infinite;
}
</style>